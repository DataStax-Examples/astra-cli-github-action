name: Astra Cli Sample
on:
  push:
    branches:
      - main
    paths:
      - README.MD
      - '.github/workflows/cli-db-create.yml'  
jobs:
  cli-create-db:
    env:
      ASTRA_DB_APPLICATION_TOKEN: ${{ secrets.ASTRA_DB_APPLICATION_TOKEN }}
      ASTRA_DB_NAME: demo
      ASTRA_DB_KEYSPACE: demo
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install CLI
        run: curl -Ls "https://dtsx.io/get-astra-cli" | bash
      - name: Create DB
        run: astra db create $ASTRA_DB_NAME -k $demo --if-not-exists 

        
